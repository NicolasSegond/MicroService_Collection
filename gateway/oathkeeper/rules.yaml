# Oathkeeper Access Rules
# Définit quelles routes nécessitent une authentification

# Routes protégées - Article Service
- id: article-service-protected
  match:
    url: <http|https>://<.*>/api/articles<.*>
    methods:
      - POST
      - PUT
      - PATCH
      - DELETE
      - OPTIONS
  authenticators:
    - handler: oauth2_introspection
  authorizer:
    handler: allow
  mutators:
    - handler: header

# Routes protégées - Uploads (Media)
- id: media-service-protected
  match:
    url: <http|https>://<.*>/api/media<.*>
    methods:
      - POST
      - OPTIONS
  authenticators:
    - handler: oauth2_introspection
  authorizer:
    handler: allow
  mutators:
    - handler: header
